---
import Layout from "../layouts/Layout.astro";

// Import base path for proper navigation - ensure it ends with /
const base = import.meta.env.BASE_URL.endsWith("/")
  ? import.meta.env.BASE_URL
  : import.meta.env.BASE_URL + "/";
---

<Layout title="Our Projects - SSS Security Solutions">
  <!-- Projects Hero -->
  <section class="projects-hero">
    <div class="hero-content">
      <h1 class="hero-title">our portfolio</h1>
      <p class="hero-subtitle">
        showcasing our expertise in security system installations across various
        sectors and environments
      </p>
    </div>
  </section>

  <!-- Projects Filter Navigation -->
  <nav class="projects-filter">
    <div class="container">
      <p class="projects-description">
        Explore our completed security installation projects across various
        sectors including government, education, healthcare, hospitality, and
        corporate facilities.
      </p>
    </div>
  </nav>

  <!-- Projects Showcase -->
  <section class="projects-showcase">
    <div class="container">
      <div class="projects-masonry-grid">
        <!-- King Khalid International Airport -->
        <div class="project-item large" data-project="kkia">
          <div class="project-image">
            <img
              src={`${base}projects/King Khalid International Airport - Terminal 1 - Pic/cover.jpeg`}
              alt="King Khalid International Airport Terminal 1"
            />
          </div>
          <div class="project-info">
            <h3 class="project-title">king khalid international airport</h3>
            <p class="project-subtitle">terminal 1 renovation project</p>
            <span class="project-category">government</span>
          </div>
        </div>

        <!-- Learning Oasis School -->
        <div class="project-item medium" data-project="learning-oasis">
          <div class="project-image">
            <img
              src={`${base}/images/projects/learning_oasis_int_schools_cover.jpg`}
              alt="Learning Oasis National International School"
            />
          </div>
          <div class="project-info">
            <h3 class="project-title">learning oasis national school</h3>
            <p class="project-subtitle">comprehensive security system</p>
            <span class="project-category">education</span>
          </div>
        </div>

        <!-- Citadines Culture Village Dubai -->
        <div class="project-item tall" data-project="citadines">
          <div class="project-image">
            <img
              src={`${base}projects/Citadines Culture Village Dubai - Pic/cover.jpg`}
              alt="Citadines Culture Village Dubai"
            />
          </div>
          <div class="project-info">
            <h3 class="project-title">citadines culture village dubai</h3>
            <p class="project-subtitle">hospitality security solution</p>
            <span class="project-category">hospitality</span>
          </div>
        </div>

        <!-- Dallah Rafa Clinic -->
        <div class="project-item medium" data-project="dallah">
          <div class="project-image">
            <img
              src={`${base}projects/Dallah Rafa Clinic Basement Parking Renovation - Pic/cover.jpg`}
              alt="Dallah Rafa Clinic Basement Parking"
            />
          </div>
          <div class="project-info">
            <h3 class="project-title">dallah rafa clinic</h3>
            <p class="project-subtitle">basement parking renovation</p>
            <span class="project-category">healthcare</span>
          </div>
        </div>

        <!-- Point to Point Wireless -->
        <div class="project-item wide" data-project="p2p">
          <div class="project-image">
            <img
              src={`${base}projects/Point to Point Wireless Connection Project - Pic/P2P.jpg`}
              alt="Point to Point Wireless Connection"
            />
          </div>
          <div class="project-info">
            <h3 class="project-title">point to point wireless connection</h3>
            <p class="project-subtitle">long-distance network bridging</p>
            <span class="project-category">networking</span>
          </div>
        </div>

        <!-- Serviced Office - SPACES by Regus -->
        <div class="project-item medium" data-project="spaces">
          <div class="project-image">
            <img
              src={`${base}projects/Serviced Office - SPACES - by Regus at Riyadh Park - Pic/cover.jpg`}
              alt="Serviced Office SPACES by Regus"
            />
          </div>
          <div class="project-info">
            <h3 class="project-title">spaces by regus</h3>
            <p class="project-subtitle">riyadh park serviced office</p>
            <span class="project-category">corporate</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery Modal -->
  <div id="gallery-modal" class="gallery-modal">
    <div class="gallery-modal-content">
      <button class="gallery-close">&times;</button>
      <div class="gallery-header">
        <h3 id="gallery-title"></h3>
        <p id="gallery-subtitle"></p>
      </div>
      <div class="gallery-main">
        <button class="gallery-nav gallery-prev">&#8249;</button>
        <img id="gallery-image" src="" alt="" />
        <button class="gallery-nav gallery-next">&#8250;</button>
      </div>
      <div class="gallery-thumbnails">
        <div id="gallery-thumbs"></div>
      </div>
      <div class="gallery-counter">
        <span id="gallery-current">1</span> / <span id="gallery-total">1</span>
      </div>
    </div>
  </div>

  <!-- CTA Section -->
  <section class="projects-cta">
    <div class="container">
      <div class="cta-content">
        <h2 class="cta-title">ready to start your project?</h2>
        <p class="cta-subtitle">
          let us bring our expertise to your security requirements
        </p>
        <div class="cta-buttons">
          <a href="/contact" class="btn btn-primary">get quote</a>
          <a href="/services" class="btn btn-secondary">our services</a>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* Projects Hero */
  .projects-hero {
    padding: 8rem 0 4rem;
    background: linear-gradient(15deg, #2c3031 0%, #00ade7 100%);
    color: #fff;
    text-align: center;
  }

  .hero-title {
    font-size: 3rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
    text-transform: lowercase;
    color: #fff;
  }

  .hero-subtitle {
    font-size: 1.2rem;
    font-weight: 300;
    color: rgba(255, 255, 255, 0.9);
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* Projects Filter */
  .projects-filter {
    padding: 2rem 0;
    background: rgba(255, 255, 255, 0.95);
    position: sticky;
    top: 0;
    z-index: 100;
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    text-align: center;
  }

  .projects-description {
    color: #64748b;
    font-size: 1.1rem;
    max-width: 800px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* Projects Showcase */
  .projects-showcase {
    padding: 4rem 0;
    background: #f8fafc;
  }

  .projects-masonry-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    grid-auto-rows: 280px;
    gap: 2rem;
    max-width: 1400px;
    margin: 0 auto;
  }

  .project-item {
    position: relative;
    border-radius: 15px;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    cursor: pointer;
  }

  .project-item.large {
    grid-row: span 2;
  }

  .project-item.tall {
    grid-row: span 2;
  }

  .project-item.wide {
    grid-column: span 2;
  }

  .project-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  }

  .project-image {
    position: relative;
    height: 100%;
    overflow: hidden;
  }

  .project-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .project-item:hover .project-image img {
    transform: scale(1.05);
  }

  .project-info {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(
      transparent,
      rgba(0, 0, 0, 0.7),
      rgba(0, 0, 0, 0.9)
    );
    color: white;
    padding: 3rem 2rem 2rem;
    transform: translateY(100%);
    transition: transform 0.3s ease;
  }

  .project-item:hover .project-info {
    transform: translateY(0);
  }

  .hero-title {
    font-size: 4rem;
    font-weight: 200;
    color: #fff;
    margin-bottom: 2rem;
    text-transform: lowercase;
    letter-spacing: -1px;
    line-height: 1.1;
    text-shadow: 0 2px 16px rgba(0, 0, 0, 0.45);
  }

  .project-subtitle {
    font-size: 1rem;
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 1rem;
  }

  .project-category {
    display: inline-block;
    background: rgba(26, 54, 93, 0.9);
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 500;
  }

  /* Filter States */
  .project-item.hidden {
    display: none;
  }

  /* Gallery Modal */
  .gallery-modal {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(5px);
  }

  .gallery-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .gallery-modal-content {
    position: relative;
    width: 95%;
    max-width: 1200px;
    height: 90vh;
    display: flex;
    flex-direction: column;
    background: #fff;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
  }

  .gallery-close {
    position: absolute;
    top: 15px;
    right: 15px;
    background: rgba(0, 0, 0, 0.7);
    color: #fff;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s ease;
  }

  .gallery-close:hover {
    background: rgba(0, 0, 0, 0.9);
    transform: scale(1.1);
  }

  .gallery-header {
    padding: 2rem;
    background: linear-gradient(135deg, #1a365d 0%, #2c5aa0 100%);
    color: #fff;
    text-align: center;
  }

  .gallery-header h3 {
    font-size: 1.8rem;
    margin: 0 0 0.5rem;
    text-transform: lowercase;
  }

  .gallery-header p {
    margin: 0;
    opacity: 0.9;
    font-size: 1.1rem;
  }

  .gallery-main {
    flex: 1;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #000;
    overflow: hidden;
  }

  .gallery-main img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    transition: all 0.3s ease;
  }

  .gallery-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255, 255, 255, 0.9);
    color: #333;
    border: none;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 5;
  }

  .gallery-nav:hover {
    background: #fff;
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }

  .gallery-prev {
    left: 20px;
  }

  .gallery-next {
    right: 20px;
  }

  .gallery-thumbnails {
    padding: 1rem;
    background: #f8fafc;
    border-top: 1px solid #e2e8f0;
    max-height: 120px;
    overflow-x: auto;
    overflow-y: hidden;
  }

  #gallery-thumbs {
    display: flex;
    gap: 0.5rem;
    padding: 0.5rem 0;
  }

  .gallery-thumb {
    flex-shrink: 0;
    width: 80px;
    height: 60px;
    border-radius: 8px;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.3s ease;
  }

  .gallery-thumb:hover,
  .gallery-thumb.active {
    border-color: #2c5aa0;
    transform: scale(1.05);
  }

  .gallery-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .gallery-counter {
    padding: 1rem;
    text-align: center;
    background: #f8fafc;
    color: #64748b;
    font-weight: 500;
    border-top: 1px solid #e2e8f0;
  }

  /* CTA Section */
  .projects-cta {
    padding: 4rem 0;
    background: linear-gradient(135deg, #1a365d 0%, #2c5aa0 100%);
    color: #fff;
    text-align: center;
  }

  .cta-title {
    font-size: 2.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: #fff;
    text-transform: lowercase;
  }

  .cta-subtitle {
    font-size: 1.2rem;
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .cta-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    display: inline-block;
    padding: 1rem 2rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }

  .btn-primary {
    background: #fff;
    color: #1a365d;
  }

  .btn-primary:hover {
    background: transparent;
    color: #fff;
    border-color: #fff;
    transform: translateY(-2px);
  }

  .btn-secondary {
    background: transparent;
    color: #fff;
    border-color: #fff;
  }

  .btn-secondary:hover {
    background: #fff;
    color: #1a365d;
    transform: translateY(-2px);
  }

  .cta-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    padding: 1rem 2rem;
    border-radius: 50px;
    text-decoration: none;
    font-weight: 600;
    text-transform: lowercase;
    transition: all 0.3s ease;
    display: inline-block;
  }

  .btn-primary {
    background: white;
    color: #1a365d;
  }

  .btn-secondary {
    background: transparent;
    color: white;
    border: 2px solid white;
  }

  .btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }

  /* Responsive Design */
  @media (max-width: 1024px) {
    .projects-masonry-grid {
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }

    .project-item.wide {
      grid-column: span 1;
    }

    .gallery-modal-content {
      width: 98%;
      height: 95vh;
    }

    .gallery-nav {
      width: 40px;
      height: 40px;
      font-size: 1.2rem;
    }

    .gallery-prev {
      left: 10px;
    }

    .gallery-next {
      right: 10px;
    }
  }

  @media (max-width: 768px) {
    .hero-title {
      font-size: 3rem;
    }

    .projects-masonry-grid {
      grid-template-columns: 1fr;
      grid-auto-rows: 250px;
    }

    .project-item.large,
    .project-item.tall {
      grid-row: span 1;
    }

    .project-info {
      transform: translateY(0);
      background: linear-gradient(
        transparent,
        rgba(0, 0, 0, 0.8),
        rgba(0, 0, 0, 0.95)
      );
    }

    .projects-description {
      font-size: 1rem;
      padding: 0 1rem;
    }

    .cta-title {
      font-size: 2rem;
    }

    .cta-buttons {
      flex-direction: column;
      align-items: center;
    }

    .gallery-header {
      padding: 1.5rem 1rem;
    }

    .gallery-header h3 {
      font-size: 1.4rem;
    }

    .gallery-header p {
      font-size: 1rem;
    }

    .gallery-thumbnails {
      padding: 0.5rem;
    }

    .gallery-thumb {
      width: 60px;
      height: 45px;
    }
  }
</style>

<script>
  // Gallery functionality
  document.addEventListener("DOMContentLoaded", function () {
    const projectItems = document.querySelectorAll(".project-item");
    const galleryModal = document.getElementById("gallery-modal");
    const galleryClose = document.querySelector(".gallery-close");
    const galleryTitle = document.getElementById("gallery-title");
    const gallerySubtitle = document.getElementById("gallery-subtitle");
    const galleryImage = document.getElementById("gallery-image");
    const galleryThumbs = document.getElementById("gallery-thumbs");
    const galleryPrev = document.querySelector(".gallery-prev");
    const galleryNext = document.querySelector(".gallery-next");
    const galleryCurrent = document.getElementById("gallery-current");
    const galleryTotal = document.getElementById("gallery-total");

    let currentProject = null;
    let currentImageIndex = 0;
    let projectImages = [];

    // Project data with image arrays
    const projects = {
      kkia: {
        title: "King Khalid International Airport",
        subtitle: "Terminal 1 Renovation Project",
        folder: "King Khalid International Airport - Terminal 1 - Pic",
        images: [
          "0001.jpg",
          "0002.jpg",
          "0003.jpg",
          "0004.jpg",
          "0005.jpg",
          "0006.jpg",
          "0007.jpg",
          "0009.jpg",
          "0010.jpg",
          "0011.jpg",
          "0012.jpg",
          "0013.jpg",
          "0014.jpg",
          "0015.jpg",
          "0016.jpg",
          "0017.jpg",
          "0018.jpg",
          "0019.jpg",
          "0020.jpg",
          "0021.jpg",
          "KKIA 1.jpg",
          "KKIA 2.jpg",
          "KKIA 3.png",
          "P2P.jpg",
        ],
      },
      "learning-oasis": {
        title: "Learning Oasis National School",
        subtitle: "Comprehensive Security System",
        folder: "Learning Oasis National International School - Pic",
        images: [
          "5_000.jpg",
          "6_004.jpg",
          "6_280.jpg",
          "WhatsApp Video 2023-10-23 at 12.03.21_114.jpg",
          "WhatsApp Video 2023-10-23 at 12.03.21_119.jpg",
          "WhatsApp Video 2023-10-23 at 12.03.21_130.jpg",
          "WhatsApp Video 2023-10-23 at 12.03.21_175.jpg",
          "WhatsApp Video 2023-10-23 at 12.03.21_210.jpg",
          "WhatsApp Video 2023-10-23 at 12.03.21_253.jpg",
          "WhatsApp Video 2023-10-23 at 12.03.21_299.jpg",
        ],
      },
      citadines: {
        title: "Citadines Culture Village Dubai",
        subtitle: "Hospitality Security Solution",
        folder: "Citadines Culture Village Dubai - Pic",
        images: [
          "WhatsApp Image 2023-10-23 at 12.05.09.jpeg",
          "WhatsApp Image 2023-10-23 at 12.05.19.jpeg",
          "WhatsApp Image 2023-10-23 at 12.05.28.jpeg",
          "WhatsApp Image 2023-10-23 at 12.05.37.jpeg",
          "WhatsApp Image 2023-10-23 at 12.05.52.jpeg",
          "WhatsApp Image 2023-10-23 at 12.06.03.jpeg",
          "WhatsApp Image 2023-10-23 at 12.06.13.jpeg",
          "WhatsApp Image 2023-10-23 at 12.06.34.jpeg",
        ],
      },
      dallah: {
        title: "Dallah Rafa Clinic",
        subtitle: "Basement Parking Renovation",
        folder: "Dallah Rafa Clinic Basement Parking Renovation - Pic",
        images: [
          "WhatsApp Image 2023-10-23 at 12.00.22.jpeg",
          "WhatsApp Image 2023-10-23 at 12.00.22 (1).jpeg",
          "WhatsApp Image 2023-10-23 at 12.00.22 (2).jpeg",
          "WhatsApp Image 2023-10-23 at 12.00.22 (3).jpeg",
          "WhatsApp Image 2023-10-23 at 12.00.22 (4).jpeg",
          "WhatsApp Image 2023-10-23 at 12.00.22 (5).jpeg",
          "WhatsApp Image 2023-10-23 at 12.00.22 (6).jpeg",
        ],
      },
      p2p: {
        title: "Point to Point Wireless Connection",
        subtitle: "Long-Distance Network Bridging",
        folder: "Point to Point Wireless Connection Project - Pic",
        images: [
          "P2P.jpg",
          "2.png",
          "3.png",
          "4.png",
          "5.png",
          "6.png",
          "IMG-20220531-WA0008.jpg",
          "IMG-20220531-WA0017.jpg",
          "IMG-20220531-WA0019.jpg",
          "IMG-20220531-WA0023.jpg",
          "IMG-20220531-WA0024.jpg",
          "IMG-20220531-WA0028.jpg",
        ],
      },
      spaces: {
        title: "SPACES by Regus",
        subtitle: "Riyadh Park Serviced Office",
        folder: "Serviced Office - SPACES - by Regus at Riyadh Park - Pic",
        images: [
          "1.png",
          "2.png",
          "3.png",
          "4.png",
          "5.png",
          "6.png",
          "WhatsApp Image 2023-10-23 at 11.56.27.jpeg",
          "WhatsApp Image 2023-10-23 at 11.56.27 (1).jpeg",
          "WhatsApp Image 2023-10-23 at 11.56.27 (2).jpeg",
          "WhatsApp Image 2023-10-23 at 11.56.28.jpeg",
        ],
      },
    };

    // Open gallery
    function openGallery(projectId) {
      currentProject = projects[projectId];
      if (!currentProject) return;

      currentImageIndex = 0;
      projectImages = currentProject.images;

      galleryTitle.textContent = currentProject.title;
      gallerySubtitle.textContent = currentProject.subtitle;
      galleryTotal.textContent = projectImages.length;

      createThumbnails();
      showImage(0);
      galleryModal.classList.add("active");
      document.body.style.overflow = "hidden";
    }

    // Close gallery
    function closeGallery() {
      galleryModal.classList.remove("active");
      document.body.style.overflow = "";
      currentProject = null;
      currentImageIndex = 0;
      projectImages = [];
    }

    // Create thumbnails
    function createThumbnails() {
      galleryThumbs.innerHTML = "";
      projectImages.forEach((imageName, index) => {
        const thumb = document.createElement("div");
        thumb.className = "gallery-thumb";
        if (index === 0) thumb.classList.add("active");

        const img = document.createElement("img");
        img.src = `/sss/projects/${currentProject.folder}/${imageName}`;
        img.alt = `${currentProject.title} - Image ${index + 1}`;

        thumb.appendChild(img);
        thumb.addEventListener("click", () => showImage(index));
        galleryThumbs.appendChild(thumb);
      });
    }

    // Show specific image
    function showImage(index) {
      if (index < 0 || index >= projectImages.length) return;

      currentImageIndex = index;
      galleryImage.src = `/sss/projects/${currentProject.folder}/${projectImages[index]}`;
      galleryImage.alt = `${currentProject.title} - Image ${index + 1}`;
      galleryCurrent.textContent = index + 1;

      // Update active thumbnail
      document.querySelectorAll(".gallery-thumb").forEach((thumb, i) => {
        thumb.classList.toggle("active", i === index);
      });

      // Update navigation buttons
      galleryPrev.style.opacity = index === 0 ? "0.5" : "1";
      galleryNext.style.opacity =
        index === projectImages.length - 1 ? "0.5" : "1";
    }

    // Previous image
    function prevImage() {
      if (currentImageIndex > 0) {
        showImage(currentImageIndex - 1);
      }
    }

    // Next image
    function nextImage() {
      if (currentImageIndex < projectImages.length - 1) {
        showImage(currentImageIndex + 1);
      }
    }

    // Event listeners
    projectItems.forEach((item) => {
      item.addEventListener("click", () => {
        const projectId = item.getAttribute("data-project");
        openGallery(projectId);
      });
    });

    galleryClose.addEventListener("click", closeGallery);
    galleryPrev.addEventListener("click", prevImage);
    galleryNext.addEventListener("click", nextImage);

    // Close on outside click
    galleryModal.addEventListener("click", (e) => {
      if (e.target === galleryModal) {
        closeGallery();
      }
    });

    // Keyboard navigation
    document.addEventListener("keydown", (e) => {
      if (!galleryModal.classList.contains("active")) return;

      switch (e.key) {
        case "Escape":
          closeGallery();
          break;
        case "ArrowLeft":
          prevImage();
          break;
        case "ArrowRight":
          nextImage();
          break;
      }
    });
  });
</script>
